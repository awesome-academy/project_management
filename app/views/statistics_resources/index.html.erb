<% provide :title, t("layouts.sidebar.statistics_resources") %>
<% content_for :javascript_file do %>
  <%= javascript_include_tag "animate" %>
<% end %>

<h1 class="text-center mb-8 fw-bold"><%= t "layouts.sidebar.statistics_resources" %></h1>
<%= render "search" %>
<% if @pagy.pages > 1 %>
  <div class="d-flex justify-content-between align-items-center">
    <!-- Pagination -->
    <%== pagy_info @pagy %>
    <%== pagy_bootstrap_nav @pagy %>
  </div>
<% end %>
<div class="overflow-scroll">
  <table class="table table-striped table-hover table-bordered table-responsive position-relative value-resource-table">
    <thead>
      <tr>
        <th class="w-200px"><%= t "projects.index.name" %></th>
        <% month_number_displayed(start_month_field_value(params[:start_month_year]),
                                  month_field_value(params[:end_month_year])).each do |month_year| %>
          <th class="w-125px"> <%= t "project_features.project_feature.month" %> <%= month_year.join("-") %> </th>
        <% end %>
        <th class="w-200px">
          <%= t "value_resources.index.total_resource_year",
                month: month_number_displayed(start_month_field_value(params[:start_month_year]),
                                              month_field_value(params[:end_month_year])).length %>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr class="font-weight-bold">
        <td><%= t "value_resources.index.total" %></td>
        <%= resources_projects_html @projects,
                                    start_month_field_value(params[:start_month_year]),
                                    month_field_value(params[:end_month_year]) %>
      </tr>
      <% @project_pagys.each do |project| %>
        <%= render partial: "statistics_resource", locals: {project: project} %>
      <% end %>
    </tbody>
  </table>
</div>
